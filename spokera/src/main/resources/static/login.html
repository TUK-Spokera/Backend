<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>카카오 로그인 테스트</title>
    <script>
        const KAKAO_CLIENT_ID = "cc36a041ea25f338bef9fb13eb73856a";  // ✅ 카카오 REST API 키
        const BASE_URL = "https://3fd2-210-99-254-13.ngrok-free.app";  // ✅ ngrok 주소로 변경
        const KAKAO_REDIRECT_URI = BASE_URL + "/oauth/kakao/redirect";  // ✅ 전체 redirect URI

        function kakaoLogin() {
            const kakaoAuthUrl = `https://kauth.kakao.com/oauth/authorize?client_id=${KAKAO_CLIENT_ID}&redirect_uri=${KAKAO_REDIRECT_URI}&response_type=code`;
            window.location.href = kakaoAuthUrl;
        }

        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            const code = urlParams.get('code');

            if (code) {
                fetch(`${BASE_URL}/oauth/kakao/redirect?code=${code}`)
                    .then(response => response.json())
                    .then(data => {
                        document.getElementById("jwtToken").innerText = "JWT Access Token: " + data.accessToken;
                        console.log("JWT:", data);
                    })
                    .catch(error => console.error("Error:", error));
            }
        };
    </script>
</head>
<body>
<h1>카카오 로그인 테스트</h1>
<button onclick="kakaoLogin()">카카오 로그인</button>
<p id="jwtToken"></p>
</body>
</html>
